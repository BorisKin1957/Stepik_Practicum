'''Дан одномерный массив целых чисел. Каждое значение массива будет являться
ключом, а индекс массива — комнатой. В комнате вы можете найти 1 или несколько
ключей, но также и не найти ни одного. Необходимо вернуть true, если получилось
открыть все комнаты, и false, если не удалось.'''


def can_open_all_rooms(rooms: list[list[int]]) -> bool:
    # Начинаем с комнаты 0 — она открыта, и мы получаем все ключи, которые в ней лежат
    keys = [key for key in rooms[0]]

    # Проходим по комнатам с индекса 1 до последнего (комната 0 уже открыта)
    for i in range(1, len(rooms)):
        # Если у нас нет ключа от комнаты i — мы не можем её открыть
        if i not in keys:
            return False  # Не удалось открыть все комнаты

        # Если комната i открыта — добавляем все ключи, которые в ней находятся
        keys.extend(rooms[i])

    # Если дошли сюда — значит, открыли все комнаты
    return True


# Тест 1: [[1], [2], [3], []]
# Комнаты: 0→1, 1→2, 2→3, 3→ничего → можно пройти все → ожидаем: True
print(can_open_all_rooms([[1], [2], [3], []]))

# Тест 2: [[1, 3], [3, 0, 1], [2], [0]]
# У нас есть ключи от 1 и 3 из комнаты 0, но никто не даёт ключ от комнаты 2 → False
print(can_open_all_rooms([[1, 3], [3, 0, 1], [2], [0]]))

# Тест 3: [[]] — только одна комната (0), она открыта → True
print(can_open_all_rooms([[]]))